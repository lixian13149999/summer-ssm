extends ../includes/layout.jade
block content
	//- input(name='btnUp', type='button',value='markdown',onclick='markdown()')

	<div style="width: 400px;border: solid #ccc 1px;height: 400px;display: inline-block; vertical-align:top;">
	<textarea class="form-control" rows="20" id='itext'></textarea>
	</div>
	<div id="content" style="width: 400px;border: solid #ccc 1px;height: 400px;display: inline-block; vertical-align:top;"></div>
	<div id="content2" style="width: 400px;border: solid #ccc 1px;height: 400px;display: inline-block; vertical-align:top;"></div>
	script(type='text/javascript',src='/libs/marked/lib/marked.js')
	script.
		$(function(){
			$(document).on('keyup','#itext',function(){
				var val = $(this).val();

				//- 这里是通过后台处理的方式,不建议使用,因为这样服务器压力太大了
				//- $.ajax({
				//- 	url: '/markdown',
				//- 	type: 'POST',
				//- 	data: {markval:val},
				//- 	//- async: false,
				//- 	//- cache: false,
				//- 	//- contentType: false,
				//- 	//- processData: false,
				//- 	success: function(data){
				//- 		if(200 === data.code) {
				//- 			//- $("#imgShow").attr('src', data.msg.url);
				//- 			//- $("#spanMessage").html("上传成功");
				//- 			console.log('pathExcel success');
				//- 			$("#content").html(data.imarkedval);
				//- 			//- document.getElementById('content').innerHTML = data.imarkedval;
				//- 		} else {
				//- 			//- $("#spanMessage").html("上传失败");
				//- 			console.log('pathExcel error1')
				//- 		}

				//- 		//- console.log('pathExcel success, data:', data);
				//- 	},
				//- 	error: function(){
				//- 		console.log('pathExcel error2')
				//- 		//- $("#spanMessage").html("与服务器通信发生错误");
				//- 	}
				//- });


				$("#content2").html(marked(val));
			})
		})
